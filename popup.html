<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Popover System with PHP Integration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .popover-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .popover-overlay.show {
            opacity: 1;
        }
        
        .popover-container {
            position: absolute;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            min-width: 300px;
            max-width: 90vw;
            max-height: 90vh;
            overflow: auto;
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10000;
        }
        
        /* Center position (default for all popovers) */
        .popover-container.center {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
        }
        
        .popover-container.center.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        /* Top-center position (for content popovers) */
        .popover-container.top-center {
            top: 10%;
            left: 50%;
            transform: translate(-50%, -10%) scale(0.9);
        }
        
        .popover-container.top-center.show {
            transform: translate(-50%, -10%) scale(1);
            opacity: 1;
        }
        
        .popover-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
        }
        
        .popover-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
        }
        
        .popover-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: #6b7280;
            transition: color 0.2s;
        }
        
        .popover-close:hover {
            color: #374151;
        }
        
        .popover-body {
            padding: 1.5rem;
        }
        
        .popover-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }
        
        .popover-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        
        .popover-button-primary {
            background-color: #3b82f6;
            color: white;
        }
        
        .popover-button-primary:hover {
            background-color: #2563eb;
        }
        
        .popover-button-secondary {
            background-color: #6b7280;
            color: white;
        }
        
        .popover-button-secondary:hover {
            background-color: #4b5563;
        }
        
        .popover-button-success {
            background-color: #10b981;
            color: white;
        }
        
        .popover-button-success:hover {
            background-color: #059669;
        }
        
        .popover-button-danger {
            background-color: #ef4444;
            color: white;
        }
        
        .popover-button-danger:hover {
            background-color: #dc2626;
        }
        
        .popover-content {
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* Dragging state */
        .popover-container.dragging {
            cursor: move;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* Success icon animation */
        .success-icon {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: #4caf50;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #4caf50;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }
        
        .checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #4caf50;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        
        .checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        
        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }
        
        @keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }
        
        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px #4caf50;
            }
        }
        
        /* Loading state */
        .popover-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Position indicator */
        .position-indicator {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            z-index: 1;
        }
        
        /* PHP content styles */
        .php-content {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .data-table th,
        .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .data-table th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        
        .data-table tr:hover {
            background-color: #f3f4f6;
        }
        
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-active {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .status-inactive {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Enhanced Popover System with PHP Integration</h1>
        <p class="text-gray-600 text-center mb-8">All popovers display in center, but content popovers appear at top-center with PHP-loaded content</p>

        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Popover Types with PHP Content</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <button id="info-popover" class="flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg transition-colors">
                    <i class="fas fa-info-circle"></i>
                    Information Popover
                </button>
                
                <button id="confirm-popover" class="flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-4 rounded-lg transition-colors">
                    <i class="fas fa-question-circle"></i>
                    Confirmation Popover
                </button>
                
                <button id="content-popover" class="flex items-center justify-center gap-2 bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg transition-colors">
                    <i class="fas fa-table"></i>
                    Content Popover (Top-Center)
                </button>
                
                <button id="success-popover" class="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg transition-colors">
                    <i class="fas fa-check-circle"></i>
                    Success Popover
                </button>
            </div>
            
            <div class="mt-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">PHP Content Examples</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button id="users-php-popover" class="flex flex-col items-center justify-center gap-2 bg-indigo-500 hover:bg-indigo-600 text-white py-4 px-4 rounded-lg transition-colors">
                        <i class="fas fa-users text-2xl"></i>
                        <span>Load Users from PHP</span>
                        <small class="text-indigo-200">(Top-Center)</small>
                    </button>
                    <button id="products-php-popover" class="flex flex-col items-center justify-center gap-2 bg-teal-500 hover:bg-teal-600 text-white py-4 px-4 rounded-lg transition-colors">
                        <i class="fas fa-shopping-cart text-2xl"></i>
                        <span>Load Products from PHP</span>
                        <small class="text-teal-200">(Top-Center)</small>
                    </button>
                    <button id="orders-php-popover" class="flex flex-col items-center justify-center gap-2 bg-rose-500 hover:bg-rose-600 text-white py-4 px-4 rounded-lg transition-colors">
                        <i class="fas fa-receipt text-2xl"></i>
                        <span>Load Orders from PHP</span>
                        <small class="text-rose-200">(Top-Center)</small>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">PHP File Structure</h2>
            <div class="bg-gray-800 text-gray-200 p-4 rounded-lg font-mono text-sm mb-4">
                <div class="text-green-400">// PHP files structure</div>
                <div>üìÅ popovers/</div>
                <div class="ml-4">‚îú‚îÄ‚îÄ <span class="text-blue-400">get_users.php</span></div>
                <div class="ml-4">‚îú‚îÄ‚îÄ <span class="text-blue-400">get_products.php</span></div>
                <div class="ml-4">‚îî‚îÄ‚îÄ <span class="text-blue-400">get_orders.php</span></div>
            </div>
            
            <ul class="list-disc pl-5 text-gray-600 mb-4 space-y-2">
                <li><strong>PHP Integration</strong> - Content loaded from separate PHP files</li>
                <li><strong>Position Control</strong> - All popovers display in center, content popovers at top-center</li>
                <li><strong>Real Data</strong> - PHP files return JSON data rendered in popovers</li>
                <li><strong>Error Handling</strong> - Proper error handling for failed PHP requests</li>
                <li><strong>Loading States</strong> - Loading indicators while fetching PHP content</li>
            </ul>
        </div>
    </div>

    <script>
        // PHP Content Loader - Loads content from PHP files
        const PHPContentLoader = {
            // Base URL for PHP files (adjust according to your setup)
            baseUrl: 'popovers/',
            
            // Load content from PHP file
            async loadFromPHP(phpFile, params = {}) {
                try {
                    // Build URL with parameters
                    const url = new URL(this.baseUrl + phpFile, window.location.origin);
                    Object.keys(params).forEach(key => {
                        url.searchParams.append(key, params[key]);
                    });
                    
                    // Show loading state
                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return this.renderContent(phpFile, data);
                    
                } catch (error) {
                    console.error('Error loading PHP content:', error);
                    return `<div class="text-red-500 text-center p-4">
                        <i class="fas fa-exclamation-triangle text-2xl mb-2"></i>
                        <p>Error loading content: ${error.message}</p>
                    </div>`;
                }
            },
            
            // Render content based on PHP file and data
            renderContent(phpFile, data) {
                switch(phpFile) {
                    case 'get_users.php':
                        return this.renderUsers(data);
                    case 'get_products.php':
                        return this.renderProducts(data);
                    case 'get_orders.php':
                        return this.renderOrders(data);
                    default:
                        return this.renderGenericData(data);
                }
            },
            
            // Render users table
            renderUsers(users) {
                return `
                    <div class="php-content">
                        <h4 class="font-semibold text-lg mb-4 border-b pb-2">User Management</h4>
                        <div class="bg-blue-50 p-3 rounded-md mb-4">
                            <p class="text-sm text-blue-700">
                                <i class="fas fa-info-circle mr-1"></i>
                                Loaded ${users.length} users from PHP backend
                            </p>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Joined</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${users.map(user => `
                                    <tr>
                                        <td class="font-mono">#${user.id}</td>
                                        <td>
                                            <div class="flex items-center gap-2">
                                                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm">
                                                    ${user.name.charAt(0)}
                                                </div>
                                                ${user.name}
                                            </div>
                                        </td>
                                        <td>${user.email}</td>
                                        <td>${user.role}</td>
                                        <td>
                                            <span class="status-badge ${user.status === 'active' ? 'status-active' : 'status-inactive'}">
                                                ${user.status}
                                            </span>
                                        </td>
                                        <td>${user.joined_date}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            },
            
            // Render products table
            renderProducts(products) {
                return `
                    <div class="php-content">
                        <h4 class="font-semibold text-lg mb-4 border-b pb-2">Product Catalog</h4>
                        <div class="bg-teal-50 p-3 rounded-md mb-4">
                            <p class="text-sm text-teal-700">
                                <i class="fas fa-info-circle mr-1"></i>
                                Loaded ${products.length} products from PHP backend
                            </p>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Rating</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${products.map(product => `
                                    <tr>
                                        <td>
                                            <div class="flex items-center gap-3">
                                                <div class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center">
                                                    <i class="fas ${product.icon} text-gray-600"></i>
                                                </div>
                                                <div>
                                                    <div class="font-medium">${product.name}</div>
                                                    <div class="text-sm text-gray-500">SKU: ${product.sku}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>${product.category}</td>
                                        <td class="font-semibold">$${product.price}</td>
                                        <td>
                                            <div class="flex items-center gap-2">
                                                <div class="w-16 bg-gray-200 rounded-full h-2">
                                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${(product.stock / product.max_stock) * 100}%"></div>
                                                </div>
                                                <span class="text-sm">${product.stock}</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="flex items-center gap-1 text-yellow-500">
                                                ${'‚òÖ'.repeat(Math.floor(product.rating))}${'‚òÜ'.repeat(5 - Math.floor(product.rating))}
                                                <span class="text-gray-600 text-sm ml-1">${product.rating}</span>
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            },
            
            // Render orders table
            renderOrders(orders) {
                return `
                    <div class="php-content">
                        <h4 class="font-semibold text-lg mb-4 border-b pb-2">Order History</h4>
                        <div class="bg-rose-50 p-3 rounded-md mb-4">
                            <p class="text-sm text-rose-700">
                                <i class="fas fa-info-circle mr-1"></i>
                                Loaded ${orders.length} orders from PHP backend
                            </p>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${orders.map(order => `
                                    <tr>
                                        <td class="font-mono font-semibold">#${order.id}</td>
                                        <td>${order.customer}</td>
                                        <td class="font-semibold">$${order.amount}</td>
                                        <td>
                                            <span class="status-badge ${
                                                order.status === 'completed' ? 'status-active' :
                                                order.status === 'pending' ? 'status-pending' :
                                                'status-inactive'
                                            }">
                                                ${order.status}
                                            </span>
                                        </td>
                                        <td>${order.date}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            },
            
            // Render generic data
            renderGenericData(data) {
                return `
                    <div class="php-content">
                        <h4 class="font-semibold text-lg mb-4">Data from PHP</h4>
                        <pre class="bg-gray-100 p-4 rounded-md overflow-auto">${JSON.stringify(data, null, 2)}</pre>
                    </div>
                `;
            }
        };

        // Popover system
        const Popover = {
            // Create and show a popover
            async show(options) {
                // Create overlay
                const overlay = document.createElement('div');
                overlay.className = 'popover-overlay';
                document.body.appendChild(overlay);
                
                // Create popover container
                const popover = document.createElement('div');
                
                // Determine position class based on type
                // Content popovers use top-center, others use center
                const positionClass = options.type === 'content' ? 'top-center' : 'center';
                popover.className = `popover-container ${positionClass}`;
                
                // Show loading state if content is being loaded asynchronously
                let contentHtml = options.content || '';
                
                // If content is a function or promise, handle it
                if (typeof options.content === 'function') {
                    contentHtml = '<div class="popover-loading"><div class="loading-spinner"></div><p class="mt-2 text-gray-600">Loading content from PHP...</p></div>';
                }
                
                // Build popover content based on type
                let footerHtml = '';
                
                switch(options.type) {
                    case 'info':
                        footerHtml = `
                            <button class="popover-button popover-button-primary" data-action="ok">
                                ${options.okText || 'OK'}
                            </button>
                        `;
                        break;
                        
                    case 'confirm':
                        footerHtml = `
                            <button class="popover-button popover-button-secondary" data-action="cancel">
                                ${options.cancelText || 'Cancel'}
                            </button>
                            <button class="popover-button popover-button-primary" data-action="confirm">
                                ${options.confirmText || 'Confirm'}
                            </button>
                        `;
                        break;
                        
                    case 'content':
                        footerHtml = options.buttons || '';
                        break;
                        
                    case 'success':
                        footerHtml = `
                            <button class="popover-button popover-button-success" data-action="ok">
                                ${options.okText || 'OK'}
                            </button>
                        `;
                        break;
                }
                
                // Set popover HTML
                popover.innerHTML = `
                    <div class="position-indicator">${positionClass}</div>
                    <div class="popover-header">
                        <h3 class="popover-title">${options.title}</h3>
                        <button class="popover-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="popover-body">
                        ${contentHtml}
                    </div>
                    <div class="popover-footer">
                        ${footerHtml}
                    </div>
                `;
                
                // Add to document
                document.body.appendChild(popover);
                
                // Show with animation
                setTimeout(() => {
                    overlay.classList.add('show');
                    popover.classList.add('show');
                }, 10);
                
                // If content is a function, load it asynchronously
                if (typeof options.content === 'function') {
                    try {
                        const loadedContent = await options.content();
                        const body = popover.querySelector('.popover-body');
                        body.innerHTML = loadedContent;
                    } catch (error) {
                        const body = popover.querySelector('.popover-body');
                        body.innerHTML = `<div class="text-red-500 text-center p-4">
                            <i class="fas fa-exclamation-triangle text-2xl mb-2"></i>
                            <p>Error loading content: ${error.message}</p>
                        </div>`;
                    }
                }
                
                // Set up event handlers
                const closePopover = () => {
                    overlay.classList.remove('show');
                    popover.classList.remove('show');
                    
                    setTimeout(() => {
                        if (document.body.contains(overlay)) {
                            document.body.removeChild(overlay);
                        }
                        if (document.body.contains(popover)) {
                            document.body.removeChild(popover);
                        }
                    }, 300);
                };
                
                // Close button
                popover.querySelector('.popover-close').addEventListener('click', closePopover);
                
                // Overlay click (outside popover)
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        closePopover();
                        if (options.onCancel) options.onCancel();
                    }
                });
                
                // Button actions
                popover.querySelectorAll('[data-action]').forEach(button => {
                    button.addEventListener('click', () => {
                        const action = button.getAttribute('data-action');
                        
                        if (action === 'ok' || action === 'confirm') {
                            if (options.onConfirm) options.onConfirm();
                        } else if (action === 'cancel') {
                            if (options.onCancel) options.onCancel();
                        }
                        
                        closePopover();
                    });
                });
                
                // Keyboard support
                const handleKeydown = (e) => {
                    if (e.key === 'Escape') {
                        if (options.onCancel) options.onCancel();
                        closePopover();
                        document.removeEventListener('keydown', handleKeydown);
                    } else if (e.key === 'Enter') {
                        const primaryButton = popover.querySelector('[data-action="ok"], [data-action="confirm"]');
                        if (primaryButton) {
                            primaryButton.click();
                            document.removeEventListener('keydown', handleKeydown);
                        }
                    }
                };
                
                document.addEventListener('keydown', handleKeydown);
                
                // Make popover draggable
                let isDragging = false;
                let dragOffset = { x: 0, y: 0 };
                
                const header = popover.querySelector('.popover-header');
                
                header.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    popover.classList.add('dragging');
                    
                    const rect = popover.getBoundingClientRect();
                    dragOffset.x = e.clientX - rect.left;
                    dragOffset.y = e.clientY - rect.top;
                    
                    e.preventDefault();
                });
                
                const handleMouseMove = (e) => {
                    if (!isDragging) return;
                    
                    popover.style.left = `${e.clientX - dragOffset.x}px`;
                    popover.style.top = `${e.clientY - dragOffset.y}px`;
                    popover.style.transform = 'none';
                };
                
                const handleMouseUp = () => {
                    isDragging = false;
                    popover.classList.remove('dragging');
                };
                
                document.addEventListener('mousemove', handleMouseMove);
                document.addEventListener('mouseup', handleMouseUp);
                
                // Clean up event listeners when popover is closed
                const originalClose = closePopover;
                const enhancedClose = () => {
                    document.removeEventListener('keydown', handleKeydown);
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', handleMouseUp);
                    originalClose();
                };
                
                return {
                    close: enhancedClose,
                    element: popover
                };
            },
            
            // Information popover (center position)
            info(title, content, options = {}) {
                return this.show({
                    type: 'info',
                    title,
                    content,
                    okText: options.okText,
                    onConfirm: options.onConfirm
                });
            },
            
            // Confirmation popover (center position)
            confirm(title, content, options = {}) {
                return this.show({
                    type: 'confirm',
                    title,
                    content,
                    confirmText: options.confirmText,
                    cancelText: options.cancelText,
                    onConfirm: options.onConfirm,
                    onCancel: options.onCancel
                });
            },
            
            // Content popover (top-center position)
            content(title, content, buttons, options = {}) {
                return this.show({
                    type: 'content',
                    title,
                    content,
                    buttons
                });
            },
            
            // Success popover (center position)
            success(title, content, options = {}) {
                return this.show({
                    type: 'success',
                    title,
                    content,
                    okText: options.okText,
                    onConfirm: options.onConfirm
                });
            }
        };

        // Set up button event listeners
        document.getElementById('info-popover').addEventListener('click', () => {
            Popover.info(
                'Information',
                'This is an information popover with an OK button. It appears in the center position.',
                {
                    okText: 'Got it!',
                    onConfirm: () => {
                        console.log('Information popover confirmed');
                    }
                }
            );
        });
        
        document.getElementById('confirm-popover').addEventListener('click', () => {
            Popover.confirm(
                'Confirm Action',
                'Are you sure you want to proceed with this action? This cannot be undone. This popover appears in the center position.',
                {
                    confirmText: 'Yes, proceed',
                    cancelText: 'No, cancel',
                    onConfirm: () => {
                        console.log('Action confirmed');
                    },
                    onCancel: () => {
                        console.log('Action cancelled');
                    }
                }
            );
        });
        
        document.getElementById('content-popover').addEventListener('click', () => {
            const buttons = `
                <button class="popover-button popover-button-secondary" data-action="cancel">
                    Close
                </button>
                <button class="popover-button popover-button-primary" data-action="save">
                    Save Changes
                </button>
            `;
            
            const content = `
                <h4 class="font-semibold mb-2">Sample Form</h4>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter your name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter your email">
                    </div>
                </div>
                <div class="mt-4 bg-purple-50 p-3 rounded-md">
                    <p class="text-sm text-purple-700">This content popover appears at the top-center position.</p>
                </div>
            `;
            
            const popover = Popover.content('Content Popover', content, buttons);
        });
        
        document.getElementById('success-popover').addEventListener('click', () => {
            Popover.success(
                'Success!',
                'Your action has been completed successfully. You can now continue with your work. This popover appears in the center position.',
                {
                    okText: 'Continue',
                    onConfirm: () => {
                        console.log('Success popover closed');
                    }
                }
            );
        });
        
        // PHP Content Examples (all appear at top-center)
        document.getElementById('users-php-popover').addEventListener('click', async () => {
            const buttons = `
                <button class="popover-button popover-button-secondary" data-action="cancel">
                    Close
                </button>
                <button class="popover-button popover-button-primary" data-action="refresh">
                    <i class="fas fa-sync-alt mr-1"></i> Refresh
                </button>
            `;
            
            const popover = await Popover.content(
                'Users from PHP', 
                () => PHPContentLoader.loadFromPHP('get_users.php'), 
                buttons
            );
            
            // Add custom handler for refresh button
            setTimeout(() => {
                const refreshButton = document.querySelector('[data-action="refresh"]');
                if (refreshButton) {
                    refreshButton.addEventListener('click', () => {
                        console.log('Refresh users data');
                        // In a real app, you would reload the popover content
                        alert('Refresh functionality would reload user data from PHP');
                    });
                }
            }, 100);
        });
        
        document.getElementById('products-php-popover').addEventListener('click', async () => {
            const buttons = `
                <button class="popover-button popover-button-secondary" data-action="cancel">
                    Close
                </button>
                <button class="popover-button popover-button-primary" data-action="export">
                    <i class="fas fa-download mr-1"></i> Export
                </button>
            `;
            
            const popover = await Popover.content(
                'Products from PHP', 
                () => PHPContentLoader.loadFromPHP('get_products.php'), 
                buttons
            );
        });
        
        document.getElementById('orders-php-popover').addEventListener('click', async () => {
            const buttons = `
                <button class="popover-button popover-button-secondary" data-action="cancel">
                    Close
                </button>
                <button class="popover-button popover-button-primary" data-action="filter">
                    <i class="fas fa-filter mr-1"></i> Filter
                </button>
            `;
            
            const popover = await Popover.content(
                'Orders from PHP', 
                () => PHPContentLoader.loadFromPHP('get_orders.php', { status: 'completed' }), 
                buttons
            );
        });

        // Demo: Show a welcome popover on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                Popover.info(
                    'Welcome!',
                    'This demo shows how to load content from PHP files into popovers. Content popovers appear at top-center while others appear in center.',
                    {
                        okText: 'Get Started',
                        onConfirm: () => console.log('Welcome popover closed')
                    }
                );
            }, 1000);
        });
    </script>
</body>
</html>